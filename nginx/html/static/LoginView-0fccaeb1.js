import{a as k,u as x,c as I,U as S,_ as E}from"./index-2c25bdbe.js";/* empty css                     *//* empty css                 */import{H as U,ax as b,_ as T,a as B,m as C,p as r,V as a,P as t,l as L,u as g,a9 as N,T as R,ay as z,az as F}from"./vue-657d2c67.js";import{C as P,u as q,Y as K,a as m,e as $,w as A,x as H,m as M}from"./element-deea76d4.js";const v=d=>(z("data-v-c8054ea9"),d=d(),F(),d),Y={class:"login-wrap"},j={class:"ms-login"},D=v(()=>r("div",{class:"ms-title"},"iotscan管理系统",-1)),G={class:"login-btn"},J=v(()=>r("div",{class:"copyright"},[r("span",null,"版权所有©️zhizhuo"),r("span",null,"版本：v1.0.2")],-1)),O=U({__name:"LoginView",setup(d){const w=b(),o=T({username:"",password:""}),V={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"}]},c=k(),n=x(),u=B(),_=p=>{p&&p.validate(s=>{if(s)S.login(o).then(e=>{if(e.data.code==200){m.success("登录成功");const i=c.defaultList[e.data.data.permissions===1?"admin":"user"];e.data.data.permissions,c.handleSet(i),n.setToken(e.data.data.token),n.setPermiss(e.data.data.permissions),n.setRefresh(e.data.data.refresh),e.data.data.permissions===1?n.setRoles("超级管理员"):n.setRoles("普通用户"),n.setUserName(e.data.data.username),w.push("/")}else m.error(e.data.username)});else return m.error("请输入账号或密码"),!1})};return I().clearTags(),(p,s)=>{const e=$,i=A,f=H,h=M,y=P;return L(),C("div",Y,[r("div",j,[D,a(y,{model:o,rules:V,ref_key:"login",ref:u,class:"ms-content"},{default:t(()=>[a(f,{prop:"username"},{default:t(()=>[a(i,{modelValue:o.username,"onUpdate:modelValue":s[0]||(s[0]=l=>o.username=l),placeholder:"用户名"},{prepend:t(()=>[a(e,null,{default:t(()=>[a(g(q))]),_:1})]),_:1},8,["modelValue"])]),_:1}),a(f,{prop:"password"},{default:t(()=>[a(i,{type:"password",placeholder:"密码",modelValue:o.password,"onUpdate:modelValue":s[1]||(s[1]=l=>o.password=l),onKeyup:s[2]||(s[2]=N(l=>_(u.value),["enter"]))},{prepend:t(()=>[a(e,null,{default:t(()=>[a(g(K))]),_:1})]),_:1},8,["modelValue"])]),_:1}),r("div",G,[a(h,{type:"primary",onClick:s[3]||(s[3]=l=>_(u.value))},{default:t(()=>[R("登录")]),_:1})])]),_:1},8,["model"])]),J])}}});const ae=E(O,[["__scopeId","data-v-c8054ea9"]]);export{ae as default};
